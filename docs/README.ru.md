# Users Микросервис для проекта Finance Analyzer

__Микросервис предназначен для аутентификации и авторизации в проекте Finance Analyzer, но может быть использован и в других проектах. Для интеграции достаточно настроить своё окружение.__

## Описание
Микросервис Auth отвечает за аутентификацию и авторизацию пользователей. Он предоставляет API для входа, проверки токенов и защиты маршрутов. Микросервис использует JWT для управления токенами и Redis для кэширования данных.

## Функциональность
- **Регистрация юзера** добавление в бд.
- **Логирование** запросов и ошибок.
- **Обработка ошибок** с централизованным middleware.

## Используемые технологии
- **Node.js** + **Express** – основной фреймворк.
- **JWT** – для управления токенами.
- **Redis** – кеширование данных.
- **Axios** – для взаимодействия с User Service.
- **Winston** – логирование.
- **Helmet** и **Compression** – защита и оптимизация.
- **Swagger** – документация API.

## Структура проекта
```
api-gateway/
│── src/
│   ├── config/           # Конфигурационные файлы
│   ├── middleware/       # Middleware (логирование, ошибки, лимиты)
│   ├── monitoring/       # Мониторинг (OpenTelemetry)
│   ├── routes/           # API-маршруты
│   ├── utils/            # Утилиты и константы
│   ├── app.ts            # Основное приложение
│   ├── server.ts         # Запуск сервера
│── docker-compose.yml    # Контейнеризация
│── README.md             # Описание проекта
```

## Установка и запуск
### Локальный запуск
```bash
yarn install
yarn start
```

### Запуск в Docker
```bash
docker-compose up --build
```

## Переменные окружения (.env)
Переменное окружение специально созданно не скрыто. 
```
PORT=3000
SECRET_KEY=supersecret
USER_SERVICE_URL=http://user-service:4000
USER_SERVICE_URL_CHECK_USER=/check-user
USER_SERVICE_URL_LOGIN=/login
USER_SERVICE_URL_PROTECTED=/protected
```

## API Маршруты
### Аутентификация
- **POST** `/login` – Вход по JWT.
- **GET** `/protected` – Проверка токена (кешируется в Redis).

### Пользовательский сервис
- **POST** `/user/register` – Регистрация пользователя.

## Мониторинг
Микросервис поддерживает логирование через Winston. Логи сохраняются в файлы и выводятся в консоль.

## Автор

[Кирилл Дорошев (DKMFzF)](https://vk.com/dkmfzf)

## Лицензия
MIT

